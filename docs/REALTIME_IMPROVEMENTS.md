# ì‹¤ì‹œê°„ ì‹œìŠ¤í…œ ê°œì„  ê³„íš

## í˜„ì¬ ë¬¸ì œì 

| í•­ëª© | í˜„ì¬ ë°©ì‹ | ë¬¸ì œì  |
|------|----------|--------|
| ë°ì´í„° ìˆ˜ì§‘ | 5ì´ˆë§ˆë‹¤ REST í´ë§ | ìµœëŒ€ 5ì´ˆ ì§€ì—°, API í˜¸ì¶œ ê³¼ë‹¤ |
| ì¶”ë¡  íŠ¸ë¦¬ê±° | 5ì´ˆë§ˆë‹¤ ì‹¤í–‰ | 1ë¶„ì— 12ë²ˆ ì¤‘ë³µ (11ë²ˆ ë‚­ë¹„) |
| ìº”ë“¤ ê°ì§€ | í´ë§ìœ¼ë¡œ í™•ì¸ | ì •í™•í•œ íƒ€ì´ë° ë³´ì¥ ì•ˆë¨ |
| ê±°ë˜ ì‹œì‘ | ì„œë²„ ì‹œì‘ ì‹œ ìë™ | ìˆ˜ë™ ì œì–´ ë¶ˆê°€ |
| ê±°ë˜ í˜„í™© | ê¸°ë³¸ ì •ë³´ë§Œ í‘œì‹œ | ìƒì„¸ ì •ë³´ ë° ëˆ„ì  í†µê³„ ë¶€ì¡± |

---

## 1. ì›¹ì†Œì¼“ êµ¬ë… (ì‹¤ì‹œê°„)

### í•„ìˆ˜ ìŠ¤íŠ¸ë¦¼

| ìŠ¤íŠ¸ë¦¼ | ìš©ë„ | íŠ¸ë¦¬ê±° ë™ì‘ |
|--------|------|------------|
| `kline_1m` | 1ë¶„ë´‰ í”¼ì²˜ ê³„ì‚° | **ë´‰ ì™„ì„±(is_closed=true) â†’ ì¶”ë¡  ì‹¤í–‰** |
| `kline_15m` | 15ë¶„ë´‰ í”¼ì²˜ | ë´‰ ì™„ì„± â†’ ìºì‹œ ì—…ë°ì´íŠ¸ë§Œ |
| `kline_1h` | 1ì‹œê°„ë´‰ í”¼ì²˜ | ë´‰ ì™„ì„± â†’ ìºì‹œ ì—…ë°ì´íŠ¸ë§Œ |
| `markPrice@1s` | ë§ˆí¬ê°€ê²©, í€ë”©ìœ¨ | SL/TP ëª¨ë‹ˆí„°ë§, PnL ê³„ì‚° |
| `bookTicker` | ìµœìš°ì„  í˜¸ê°€ | ì£¼ë¬¸ ì‹œ ìŠ¬ë¦¬í”¼ì§€ ê³„ì‚° |
| `userData` | ì£¼ë¬¸/í¬ì§€ì…˜ ì—…ë°ì´íŠ¸ | ì‹¤ê±°ë˜ ì‹œ ìƒíƒœ ë™ê¸°í™” |

### ìŠ¤íŠ¸ë¦¼ ìˆ˜

```
30ì¢…ëª© Ã— 5ìŠ¤íŠ¸ë¦¼ = 150ê°œ ìŠ¤íŠ¸ë¦¼
â†’ Combined Streamìœ¼ë¡œ 1ê°œ ì—°ê²°
```

### ì›¹ì†Œì¼“ URL ì˜ˆì‹œ

```python
symbols = ["BTCUSDT", "ETHUSDT", ...]  # 30ì¢…ëª©

streams = []
for symbol in symbols:
    s = symbol.lower()
    streams.extend([
        f"{s}@kline_1m",
        f"{s}@kline_15m",
        f"{s}@kline_1h",
        f"{s}@markPrice@1s",
        f"{s}@bookTicker",
    ])

# Combined stream (Futures)
url = f"wss://fstream.binance.com/stream?streams={'/'.join(streams)}"

# Testnet
url_testnet = f"wss://stream.binancefuture.com/stream?streams={'/'.join(streams)}"
```

### ë©”ì‹œì§€ í˜•ì‹

```json
// kline ë©”ì‹œì§€
{
  "stream": "btcusdt@kline_1m",
  "data": {
    "e": "kline",
    "s": "BTCUSDT",
    "k": {
      "t": 1699200000000,
      "T": 1699200059999,
      "i": "1m",
      "o": "36000.00",
      "h": "36100.00",
      "l": "35900.00",
      "c": "36050.00",
      "v": "100.5",
      "x": true            // ë´‰ ì™„ì„± ì—¬ë¶€
    }
  }
}

// markPrice ë©”ì‹œì§€
{
  "stream": "btcusdt@markPrice@1s",
  "data": {
    "e": "markPriceUpdate",
    "s": "BTCUSDT",
    "p": "36050.00",
    "r": "0.00010000",
    "T": 1699200000000
  }
}

// bookTicker ë©”ì‹œì§€
{
  "stream": "btcusdt@bookTicker",
  "data": {
    "s": "BTCUSDT",
    "b": "36049.00",
    "B": "10.5",
    "a": "36050.00",
    "A": "8.2"
  }
}
```

---

## 2. REST API í´ë§ (ì£¼ê¸°ì )

ì›¹ì†Œì¼“ìœ¼ë¡œ ì œê³µë˜ì§€ ì•ŠëŠ” ë°ì´í„°ëŠ” REST APIë¡œ í´ë§.

| ë°ì´í„° | ì—”ë“œí¬ì¸íŠ¸ | í´ë§ ì£¼ê¸° | í”¼ì²˜ |
|--------|-----------|----------|------|
| Open Interest | `/fapi/v1/openInterest` | 1ë¶„ | `oi_change`, `oi_z` |
| Global L/S Ratio | `/futures/data/globalLongShortAccountRatio` | 5ë¶„ | `ls_ratio` |
| Top Trader L/S | `/futures/data/topLongShortPositionRatio` | 5ë¶„ | `top_ls_ratio` |
| Taker Buy/Sell | `/futures/data/takerlongshortRatio` | 5ë¶„ | `taker_ratio_z` |

---

## 3. ê±°ë˜ ëª¨ë“œ ë° ìˆ˜ë™ ì œì–´

### ëª¨ë“œ ì¢…ë¥˜

| ëª¨ë“œ | ì„¤ëª… | ì‹¤ì œ ê±°ë˜ |
|------|------|----------|
| `OFF` | ê±°ë˜ ì¤‘ì§€ | X |
| `SHADOW` | ì‹œë®¬ë ˆì´ì…˜ë§Œ | X (ê°€ìƒ ê±°ë˜) |
| `LIVE` | ì‹¤ì œ ê±°ë˜ | O |

### ìˆ˜ë™ ì‹œì‘/ì¤‘ì§€ (í•µì‹¬ ë³€ê²½ì‚¬í•­)

**í˜„ì¬**: ì„œë²„ ì‹œì‘ ì‹œ ìë™ìœ¼ë¡œ ê±°ë˜ ì‹œì‘
**ê°œì„ **: ì‚¬ìš©ìê°€ ë²„íŠ¼ì„ ëˆŒëŸ¬ì•¼ë§Œ ê±°ë˜ ì‹œì‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ê±°ë˜ ì œì–´ íë¦„                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  ì„œë²„ ì‹œì‘                                              â”‚
â”‚      â†“                                                  â”‚
â”‚  ì›¹ì†Œì¼“ ì—°ê²° (ë°ì´í„° ìˆ˜ì§‘ë§Œ)                            â”‚
â”‚      â†“                                                  â”‚
â”‚  ëŒ€ê¸° ìƒíƒœ (ê±°ë˜ OFF)                                   â”‚
â”‚      â†“                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚  â”‚ [Shadow ì‹œì‘] ë²„íŠ¼   â”‚ â† ì‚¬ìš©ì í´ë¦­                â”‚
â”‚  â”‚ [Live ì‹œì‘] ë²„íŠ¼     â”‚                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚      â†“                                                  â”‚
â”‚  ê±°ë˜ í™œì„±í™” (ì¶”ë¡  + ì£¼ë¬¸)                              â”‚
â”‚      â†“                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚  â”‚ [ê±°ë˜ ì¤‘ì§€] ë²„íŠ¼     â”‚ â† ì‚¬ìš©ì í´ë¦­                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚      â†“                                                  â”‚
â”‚  ê±°ë˜ ì¤‘ì§€ (ë°ì´í„° ìˆ˜ì§‘ì€ ê³„ì†)                         â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### API ì—”ë“œí¬ì¸íŠ¸

```python
# ê±°ë˜ ì‹œì‘
POST /api/trading/start
Body: { "mode": "shadow" | "live" }
Response: { "status": "ok", "mode": "shadow", "started_at": "2026-02-03T10:00:00Z" }

# ê±°ë˜ ì¤‘ì§€
POST /api/trading/stop
Response: { "status": "ok", "stopped_at": "2026-02-03T18:00:00Z" }

# ê±°ë˜ ìƒíƒœ ì¡°íšŒ
GET /api/trading/status
Response: {
  "is_running": true,
  "mode": "shadow",
  "started_at": "2026-02-03T10:00:00Z",
  "total_trades": 45,
  "total_pnl": 125.50,
  "win_rate": 62.5
}
```

### í”„ë¡ íŠ¸ì—”ë“œ UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Trading Control                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Status: â— RUNNING (Shadow Mode)                        â”‚
â”‚  Started: 2026-02-03 10:00:00                          â”‚
â”‚  Running Time: 8h 32m                                   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Shadow ì‹œì‘ â”‚  â”‚  Live ì‹œì‘  â”‚  â”‚  ê±°ë˜ ì¤‘ì§€  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                         â”‚
â”‚  âš ï¸ Live ëª¨ë“œëŠ” ì‹¤ì œ ìê¸ˆì´ ì‚¬ìš©ë©ë‹ˆë‹¤                  â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Shadow ëª¨ë“œ ë™ì‘

Shadow ëª¨ë“œë„ ì›¹ì†Œì¼“ ê¸°ë°˜ìœ¼ë¡œ ë™ì¼í•˜ê²Œ ë™ì‘.

### Shadow vs Live ì°¨ì´ì 

| í•­ëª© | Shadow | Live |
|------|--------|------|
| ë°ì´í„° ìˆ˜ì§‘ | ë™ì¼ (ì›¹ì†Œì¼“) | ë™ì¼ (ì›¹ì†Œì¼“) |
| ì¶”ë¡  | ë™ì¼ | ë™ì¼ |
| ì£¼ë¬¸ ì‹¤í–‰ | **ì‹œë®¬ë ˆì´ì…˜** | **ì‹¤ì œ API í˜¸ì¶œ** |
| SL/TP ì²´í¬ | ê°€ìƒ ì²´í¬ | ì‹¤ì œ ì²´í¬ |
| PnL ê³„ì‚° | ì‹œë®¬ë ˆì´ì…˜ | ì‹¤ì œ |
| DB ì €ì¥ | O (shadow íƒœê·¸) | O |

### Shadow ì£¼ë¬¸ ì‹œë®¬ë ˆì´ì…˜

```python
async def execute_shadow_order(symbol: str, side: str, qty: float):
    """Shadow ëª¨ë“œì—ì„œ ê°€ìƒ ì£¼ë¬¸ ì‹¤í–‰"""

    # í˜„ì¬ í˜¸ê°€ë¡œ ì²´ê²°ê°€ ì‹œë®¬ë ˆì´ì…˜
    book = cache.get(f"{symbol}_book")
    if side == "BUY":
        fill_price = float(book["a"])  # ë§¤ë„ í˜¸ê°€ë¡œ ì²´ê²°
    else:
        fill_price = float(book["b"])  # ë§¤ìˆ˜ í˜¸ê°€ë¡œ ì²´ê²°

    # ìŠ¬ë¦¬í”¼ì§€ ì ìš©
    slippage = fill_price * 0.0001  # 0.01%
    fill_price += slippage if side == "BUY" else -slippage

    # DBì— ê°€ìƒ ì£¼ë¬¸ ì €ì¥
    order = {
        "order_id": f"shadow-{uuid4()}",
        "symbol": symbol,
        "side": side,
        "qty": qty,
        "price": fill_price,
        "status": "FILLED",
        "is_shadow": True,
        "created_at": datetime.utcnow(),
    }
    save_order(order)

    return order
```

---

## 5. Orders í˜ì´ì§€ ê°œì„ 

### ìƒë‹¨: ëˆ„ì  í†µê³„ (Trading Summary)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Trading Summary                                    Since: 2026-02-03 10:00  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ì´ ê±°ë˜  â”‚  â”‚  ìŠ¹ë¥     â”‚  â”‚ ì´ PnL   â”‚  â”‚ ìˆ˜ìµë¥    â”‚  â”‚ PF      â”‚ â”‚
â”‚  â”‚   45     â”‚  â”‚  62.2%   â”‚  â”‚ +125.50  â”‚  â”‚  +2.51%  â”‚  â”‚  1.85   â”‚ â”‚
â”‚  â”‚          â”‚  â”‚ (28/45)  â”‚  â”‚  USDT    â”‚  â”‚          â”‚  â”‚         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  Running: 8h 32m â”‚ Avg Hold: 23m â”‚ Best: +45.20 â”‚ Worst: -12.30    â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í†µê³„ í•­ëª©

| í•­ëª© | ì„¤ëª… | ê³„ì‚° |
|------|------|------|
| ì´ ê±°ë˜ | ì™„ë£Œëœ ê±°ë˜ ìˆ˜ | `COUNT(closed trades)` |
| ìŠ¹ë¥  | ìˆ˜ìµ ê±°ë˜ ë¹„ìœ¨ | `wins / total * 100` |
| ì´ PnL | ëˆ„ì  ì†ìµ (USDT) | `SUM(realized_pnl)` |
| ìˆ˜ìµë¥  | ì‹œì‘ ìë³¸ ëŒ€ë¹„ | `total_pnl / initial_capital * 100` |
| PF | Profit Factor | `gross_profit / gross_loss` |
| í‰ê·  ë³´ìœ ì‹œê°„ | ê±°ë˜ë‹¹ í‰ê·  ë³´ìœ  | `AVG(exit_time - entry_time)` |
| ìµœê³  ìˆ˜ìµ | ë‹¨ì¼ ìµœê³  ìˆ˜ìµ | `MAX(pnl)` |
| ìµœëŒ€ ì†ì‹¤ | ë‹¨ì¼ ìµœëŒ€ ì†ì‹¤ | `MIN(pnl)` |

### í•˜ë‹¨: ê±°ë˜ ëª©ë¡ (Trade List)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Trade History                                                     [Export CSV]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                   â”‚
â”‚  Symbol   â”‚ Side â”‚ Entry Time      â”‚ Exit Time       â”‚ Entry    â”‚ Exit     â”‚ PnL      â”‚ Hold   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  BTCUSDT  â”‚ LONG â”‚ 02-03 14:32:00  â”‚ 02-03 14:55:00  â”‚ 97,250.5 â”‚ 97,450.2 â”‚ +45.20   â”‚ 23m    â”‚
â”‚  ETHUSDT  â”‚ SHORTâ”‚ 02-03 14:28:00  â”‚ 02-03 14:31:00  â”‚ 2,850.30 â”‚ 2,855.10 â”‚ -12.30   â”‚ 3m     â”‚
â”‚  BTCUSDT  â”‚ LONG â”‚ 02-03 13:15:00  â”‚ 02-03 13:42:00  â”‚ 97,100.0 â”‚ 97,180.5 â”‚ +18.50   â”‚ 27m    â”‚
â”‚  DOTUSDT  â”‚ LONG â”‚ 02-03 12:55:00  â”‚ 02-03 13:10:00  â”‚ 4.235    â”‚ 4.252    â”‚ +8.20    â”‚ 15m    â”‚
â”‚  ...      â”‚      â”‚                 â”‚                 â”‚          â”‚          â”‚          â”‚        â”‚
â”‚                                                                                   â”‚
â”‚  â—€ 1 2 3 4 5 ... 10 â–¶                                                            â”‚
â”‚                                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ê±°ë˜ ëª©ë¡ ì»¬ëŸ¼

| ì»¬ëŸ¼ | ì„¤ëª… |
|------|------|
| Symbol | ê±°ë˜ ì¢…ëª© |
| Side | LONG / SHORT |
| Entry Time | ì§„ì… ì‹œê°„ |
| Exit Time | ì²­ì‚° ì‹œê°„ |
| Entry Price | ì§„ì…ê°€ |
| Exit Price | ì²­ì‚°ê°€ |
| PnL | ì‹¤í˜„ ì†ìµ (USDT) |
| Hold | ë³´ìœ  ì‹œê°„ |
| Return | ìˆ˜ìµë¥  (%) - ì„ íƒì  |

### ìƒ‰ìƒ í‘œì‹œ

```css
/* ìˆ˜ìµ ê±°ë˜ */
.profit { color: #10b981; }  /* ë…¹ìƒ‰ */

/* ì†ì‹¤ ê±°ë˜ */
.loss { color: #ef4444; }    /* ë¹¨ê°„ìƒ‰ */

/* LONG */
.long { background: #ecfdf5; }  /* ì—°ë…¹ìƒ‰ ë°°ê²½ */

/* SHORT */
.short { background: #fef2f2; } /* ì—°ë¹¨ê°„ ë°°ê²½ */
```

### API ì—”ë“œí¬ì¸íŠ¸

```python
# ê±°ë˜ í†µê³„ ì¡°íšŒ
GET /api/trading/stats
Response: {
  "started_at": "2026-02-03T10:00:00Z",
  "running_time_sec": 30720,
  "total_trades": 45,
  "wins": 28,
  "losses": 17,
  "win_rate": 62.22,
  "total_pnl": 125.50,
  "return_pct": 2.51,
  "profit_factor": 1.85,
  "avg_hold_min": 23,
  "best_trade": 45.20,
  "worst_trade": -12.30,
  "gross_profit": 350.80,
  "gross_loss": 189.60
}

# ê±°ë˜ ëª©ë¡ ì¡°íšŒ
GET /api/trading/trades?page=1&limit=20
Response: {
  "trades": [
    {
      "trade_id": "xxx",
      "symbol": "BTCUSDT",
      "side": "LONG",
      "entry_time": "2026-02-03T14:32:00Z",
      "exit_time": "2026-02-03T14:55:00Z",
      "entry_price": 97250.5,
      "exit_price": 97450.2,
      "qty": 0.01,
      "pnl": 45.20,
      "return_pct": 0.21,
      "hold_min": 23,
      "is_shadow": true
    },
    ...
  ],
  "total": 45,
  "page": 1,
  "pages": 3
}
```

---

## 6. ì¶”ë¡  íŠ¸ë¦¬ê±° ë¡œì§

### í•µì‹¬ ì›ì¹™

- **1ë¶„ë´‰ ì™„ì„± ì‹œì—ë§Œ ì¶”ë¡  ì‹¤í–‰**
- 15ë¶„/1ì‹œê°„ë´‰ì€ ìºì‹œ ì—…ë°ì´íŠ¸ë§Œ
- markPriceëŠ” ëª¨ë‹ˆí„°ë§ìš©
- **ê±°ë˜ ëª¨ë“œê°€ OFFë©´ ì¶”ë¡ ë§Œ í•˜ê³  ì‹¤í–‰ ì•ˆí•¨**

### íë¦„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 ì›¹ì†Œì¼“ ë©”ì‹œì§€ ìˆ˜ì‹                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼               â–¼               â–¼
    [kline_1m]      [kline_15m]     [markPrice]
         â”‚          [kline_1h]           â”‚
         â”‚               â”‚               â”‚
    is_closed?      is_closed?      SL/TP ì²´í¬
         â”‚               â”‚               â”‚
    Yes  â”‚          Yes  â”‚               â”‚
         â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ í”¼ì²˜ ê³„ì‚°   â”‚  â”‚ ìºì‹œ ì—…ë°ì´íŠ¸â”‚  â”‚ í¬ì§€ì…˜ í™•ì¸ â”‚
â”‚ + ì¶”ë¡      â”‚  â”‚    ë§Œ        â”‚  â”‚ ì²­ì‚° ì‹¤í–‰?  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
   ê±°ë˜ ëª¨ë“œ í™•ì¸
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â–¼         â–¼
  [OFF]    [SHADOW/LIVE]
    â”‚         â”‚
 ë¬´ì‹œ      ê±°ë˜ ì‹¤í–‰
```

---

## 7. ë°ì´í„° ì €ì¥ (ì¬í•™ìŠµìš©)

ëª¨ë“  ìˆ˜ì‹  ë°ì´í„°ëŠ” DBì— ì €ì¥í•˜ì—¬ ì¬í•™ìŠµì— ì‚¬ìš©.

| í…Œì´ë¸” | ë°ì´í„° ì†ŒìŠ¤ | ì €ì¥ ì£¼ê¸° |
|--------|------------|----------|
| `candles_1m` | kline_1m | ë´‰ ì™„ì„± ì‹œ |
| `candles_15m` | kline_15m | ë´‰ ì™„ì„± ì‹œ |
| `candles_1h` | kline_1h | ë´‰ ì™„ì„± ì‹œ |
| `premium_index` | markPrice | 1ë¶„ (ì§‘ê³„) |
| `open_interest` | REST API | 1ë¶„ |
| `long_short_ratio` | REST API | 5ë¶„ |
| `trades` | ê±°ë˜ ì‹¤í–‰ | ê±°ë˜ ì‹œ |
| `trading_sessions` | ê±°ë˜ ì„¸ì…˜ | ì‹œì‘/ì¢…ë£Œ ì‹œ |

### ê±°ë˜ ì„¸ì…˜ í…Œì´ë¸”

```sql
CREATE TABLE trading_sessions (
    session_id UUID PRIMARY KEY,
    mode VARCHAR(10) NOT NULL,        -- shadow, live
    started_at TIMESTAMPTZ NOT NULL,
    stopped_at TIMESTAMPTZ,
    initial_capital DECIMAL(18,8),
    final_capital DECIMAL(18,8),
    total_trades INT DEFAULT 0,
    total_pnl DECIMAL(18,8) DEFAULT 0,
    win_rate DECIMAL(5,2),
    profit_factor DECIMAL(8,4),
    created_at TIMESTAMPTZ DEFAULT NOW()
);
```

---

## 8. íŒŒì¼ êµ¬ì¡° (ì˜ˆìƒ)

```
services/
â”œâ”€â”€ websocket/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ connection.py          # ì›¹ì†Œì¼“ ì—°ê²° ê´€ë¦¬, ì¬ì—°ê²°
â”‚   â”œâ”€â”€ stream_router.py       # ë©”ì‹œì§€ ë¼ìš°íŒ…
â”‚   â”œâ”€â”€ handlers/
â”‚   â”‚   â”œâ”€â”€ kline_handler.py   # ìº”ë“¤ ì²˜ë¦¬ + ì¶”ë¡  íŠ¸ë¦¬ê±°
â”‚   â”‚   â”œâ”€â”€ mark_price_handler.py  # SL/TP ëª¨ë‹ˆí„°ë§
â”‚   â”‚   â”œâ”€â”€ book_ticker_handler.py # í˜¸ê°€ ì²˜ë¦¬
â”‚   â”‚   â””â”€â”€ user_data_handler.py   # ì£¼ë¬¸/í¬ì§€ì…˜ ë™ê¸°í™”
â”‚   â””â”€â”€ cache.py               # í”¼ì²˜ ìºì‹œ ê´€ë¦¬
â”‚
â”œâ”€â”€ polling/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ oi_poller.py           # Open Interest í´ë§
â”‚   â””â”€â”€ ls_ratio_poller.py     # L/S ë¹„ìœ¨ í´ë§
â”‚
â”œâ”€â”€ engine/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ trading_engine.py      # ë©”ì¸ ì—”ì§„ (ì¶”ë¡  + ê±°ë˜)
â”‚   â”œâ”€â”€ session_manager.py     # ê±°ë˜ ì„¸ì…˜ ê´€ë¦¬ (ì‹œì‘/ì¤‘ì§€)
â”‚   â”œâ”€â”€ feature_builder.py     # ì‹¤ì‹œê°„ í”¼ì²˜ ê³„ì‚°
â”‚   â”œâ”€â”€ shadow_executor.py     # Shadow ì£¼ë¬¸ ì‹¤í–‰
â”‚   â”œâ”€â”€ live_executor.py       # Live ì£¼ë¬¸ ì‹¤í–‰
â”‚   â””â”€â”€ position_manager.py    # í¬ì§€ì…˜ ê´€ë¦¬
â”‚
â”œâ”€â”€ api/
â”‚   â””â”€â”€ trading_routes.py      # ê±°ë˜ ì œì–´ API ì—”ë“œí¬ì¸íŠ¸
â”‚
â””â”€â”€ realtime_worker.py         # (ìˆ˜ì •) ì›¹ì†Œì¼“ ê¸°ë°˜ ë©”ì¸ ì›Œì»¤

apps/web/src/
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ globals.css            # (ìˆ˜ì •) ì „ì—­ ìŠ¤íƒ€ì¼
â”‚   â”œâ”€â”€ tokens.css             # CSS ë³€ìˆ˜ (í…Œë§ˆ í† í°)
â”‚   â””â”€â”€ animations.css         # ì• ë‹ˆë©”ì´ì…˜ ì •ì˜
â”‚
â”œâ”€â”€ contexts/
â”‚   â””â”€â”€ ThemeContext.tsx       # í…Œë§ˆ ìƒíƒœ ê´€ë¦¬
â”‚
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useTheme.ts            # í…Œë§ˆ í›…
â”‚
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx             # (ìˆ˜ì •) ThemeProvider ì ìš©
â”‚   â””â”€â”€ orders/
â”‚       â””â”€â”€ page.tsx           # (ìˆ˜ì •) Orders í˜ì´ì§€
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â”œâ”€â”€ ThemeToggle.tsx        # ë‹¤í¬ëª¨ë“œ í† ê¸€
â”‚   â”‚   â”œâ”€â”€ Card.tsx               # ë¦¬ë””ìì¸ëœ ì¹´ë“œ
â”‚   â”‚   â”œâ”€â”€ Badge.tsx              # ìƒíƒœ ë±ƒì§€
â”‚   â”‚   â”œâ”€â”€ Sparkline.tsx          # ë¯¸ë‹ˆ ì°¨íŠ¸
â”‚   â”‚   â”œâ”€â”€ DataTable.tsx          # ë¦¬ë””ìì¸ëœ í…Œì´ë¸”
â”‚   â”‚   â”œâ”€â”€ MetricCard.tsx         # ë©”íŠ¸ë¦­ ì¹´ë“œ
â”‚   â”‚   â””â”€â”€ StatusIndicator.tsx    # ìƒíƒœ ì¸ë””ì¼€ì´í„°
â”‚   â”‚
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx            # ë¦¬ë””ìì¸ëœ ì‚¬ì´ë“œë°”
â”‚   â”‚   â”œâ”€â”€ Header.tsx             # í—¤ë” (í…Œë§ˆ í† ê¸€ í¬í•¨)
â”‚   â”‚   â””â”€â”€ MobileNav.tsx          # ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜
â”‚   â”‚
â”‚   â”œâ”€â”€ trading/
â”‚   â”‚   â”œâ”€â”€ TradingControl.tsx     # ì‹œì‘/ì¤‘ì§€ ë²„íŠ¼
â”‚   â”‚   â”œâ”€â”€ TradingSummary.tsx     # ëˆ„ì  í†µê³„
â”‚   â”‚   â””â”€â”€ TradeHistoryTable.tsx  # ê±°ë˜ ëª©ë¡
â”‚   â””â”€â”€ ...
```

---

## 9. UI/UX ì „ë©´ ë¦¬ë””ìì¸

### í˜„ì¬ ë¬¸ì œì 

- ì „ì²´ì ìœ¼ë¡œ ì´ŒìŠ¤ëŸ½ê³  ì„¸ë ¨ë˜ì§€ ì•Šì€ ë””ìì¸
- ë‹¤í¬ëª¨ë“œ ë¯¸ì§€ì›
- ì¼ê´€ì„± ì—†ëŠ” ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼
- ì •ë³´ ë°€ë„ê°€ ë‚®ê³  ë¹„íš¨ìœ¨ì ì¸ ë ˆì´ì•„ì›ƒ

### ë””ìì¸ ë°©í–¥

| í•­ëª© | í˜„ì¬ | ê°œì„  |
|------|------|------|
| ì „ì²´ í†¤ | ë°ì€ ë°°ê²½ + í°ìƒ‰ ì¹´ë“œ | ëª¨ë˜ ë‹¤í¬/ë¼ì´íŠ¸ í…Œë§ˆ |
| ì»¬ëŸ¬ ì‹œìŠ¤í…œ | í•˜ë“œì½”ë”©ëœ ìƒ‰ìƒ | CSS ë³€ìˆ˜ ê¸°ë°˜ í…Œë§ˆ |
| ì¹´ë“œ ìŠ¤íƒ€ì¼ | ë‘¥ê·¼ ëª¨ì„œë¦¬ + ê·¸ë¦¼ì | ë¯¸ë‹ˆë©€ + ì„œë¸Œí‹€ ë³´ë” |
| íƒ€ì´í¬ê·¸ë˜í”¼ | ê¸°ë³¸ í°íŠ¸ | ëª¨ë…¸ìŠ¤í˜ì´ìŠ¤ + ì‚°ì„¸ë¦¬í”„ ì¡°í•© |
| ë°ì´í„° í‘œí˜„ | ê¸°ë³¸ í…ìŠ¤íŠ¸ | ì°¨íŠ¸, ìŠ¤íŒŒí¬ë¼ì¸, ë±ƒì§€ |

### ë‹¤í¬ëª¨ë“œ ì‹œìŠ¤í…œ

```css
/* CSS ë³€ìˆ˜ ê¸°ë°˜ í…Œë§ˆ */
:root {
  /* Light Mode */
  --bg-primary: #ffffff;
  --bg-secondary: #f8fafc;
  --bg-tertiary: #f1f5f9;
  --text-primary: #0f172a;
  --text-secondary: #475569;
  --text-muted: #94a3b8;
  --border: #e2e8f0;
  --accent: #3b82f6;
  --success: #10b981;
  --danger: #ef4444;
  --warning: #f59e0b;
}

[data-theme="dark"] {
  /* Dark Mode */
  --bg-primary: #0f172a;
  --bg-secondary: #1e293b;
  --bg-tertiary: #334155;
  --text-primary: #f8fafc;
  --text-secondary: #cbd5e1;
  --text-muted: #64748b;
  --border: #334155;
  --accent: #60a5fa;
  --success: #34d399;
  --danger: #f87171;
  --warning: #fbbf24;
}
```

### ì»´í¬ë„ŒíŠ¸ ë¦¬ë””ìì¸

#### 1. ëŒ€ì‹œë³´ë“œ ì¹´ë“œ

```
í˜„ì¬:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë‘¥ê·¼ ëª¨ì„œë¦¬                  â”‚
â”‚  ê³¼í•œ ê·¸ë¦¼ì                  â”‚
â”‚  ë„“ì€ íŒ¨ë”©                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ê°œì„ :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë¯¸ë‹ˆë©€ ë³´ë”                   â”‚
â”‚ ì½¤íŒ©íŠ¸ íŒ¨ë”©                   â”‚
â”‚ í˜¸ë²„ ì‹œ ì„œë¸Œí‹€ í•˜ì´ë¼ì´íŠ¸      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. ë°ì´í„° í…Œì´ë¸”

```
í˜„ì¬:
| Header | Header | Header |
|--------|--------|--------|
| data   | data   | data   |

ê°œì„ :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–¸ BTCUSDT  â”‚ +2.34%  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ â”‚ â— â”‚
â”‚ â–¸ ETHUSDT  â”‚ -0.52%  â”‚ â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚ â—‹ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 (ì•„ì´ì½˜, ì»¬ëŸ¬ì½”ë”©, ë¯¸ë‹ˆ ì°¨íŠ¸, ìƒíƒœ ì¸ë””ì¼€ì´í„°)
```

#### 3. ë©”íŠ¸ë¦­ ì¹´ë“œ

```
í˜„ì¬:                        ê°œì„ :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Label    â”‚                â”‚ PnL              â”‚
â”‚ 123.45   â”‚                â”‚ +$1,234.56  â†‘12% â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚ â–â–‚â–ƒâ–…â–†â–‡â–ˆâ–†â–… (ìŠ¤íŒŒí¬ë¼ì¸)
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4. ìƒíƒœ ì¸ë””ì¼€ì´í„°

```css
/* í˜„ì¬: í…ìŠ¤íŠ¸ë§Œ */
RUNNING

/* ê°œì„ : ì• ë‹ˆë©”ì´ì…˜ ë„íŠ¸ + ë°°ê²½ */
â— RUNNING  (í„ìŠ¤ ì• ë‹ˆë©”ì´ì…˜)
â—‹ STOPPED  (ê·¸ë ˆì´ ë„íŠ¸)
â—‰ SHADOW   (ë°˜íˆ¬ëª… ë„íŠ¸)
```

### ë ˆì´ì•„ì›ƒ ê°œì„ 

#### ëŒ€ì‹œë³´ë“œ

```
í˜„ì¬:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ì¹´ë“œ] [ì¹´ë“œ] [ì¹´ë“œ]                      â”‚
â”‚ [ë„“ì€ ì°¨íŠ¸                              ]â”‚
â”‚ [í…Œì´ë¸”                                 ]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ê°œì„ :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚Stat â”‚ â”‚                             â”‚ â”‚
â”‚ â”‚Cardsâ”‚ â”‚        Main Chart           â”‚ â”‚
â”‚ â”‚     â”‚ â”‚                             â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚Quickâ”‚ â”‚      Data Table             â”‚ â”‚
â”‚ â”‚Info â”‚ â”‚      (ì •ë³´ ë°€ë„ ë†’ì„)         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë„¤ë¹„ê²Œì´ì…˜ ê°œì„ 

```
í˜„ì¬: ê¸°ë³¸ ì‚¬ì´ë“œë°”

ê°œì„ :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â—ˆ Trading System            [ğŸŒ™] [ğŸ‘¤]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      â”‚                                     â”‚
â”‚  ğŸ“Š  â”‚                                     â”‚
â”‚  ğŸ“ˆ  â”‚          Content Area               â”‚
â”‚  âš™ï¸  â”‚                                     â”‚
â”‚  ğŸ“‹  â”‚                                     â”‚
â”‚      â”‚                                     â”‚
â”‚ â”€â”€â”€â”€ â”‚                                     â”‚
â”‚  ?   â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 (ì•„ì´ì½˜ ê¸°ë°˜ ë¯¸ë‹ˆë©€ ì‚¬ì´ë“œë°” + ë‹¤í¬ëª¨ë“œ í† ê¸€)
```

### ìƒ‰ìƒ íŒ”ë ˆíŠ¸

```
Primary:    #3b82f6 (Blue)
Success:    #10b981 (Green) - ìˆ˜ìµ, LONG
Danger:     #ef4444 (Red) - ì†ì‹¤, SHORT
Warning:    #f59e0b (Amber) - ê²½ê³ 
Info:       #8b5cf6 (Purple) - ì •ë³´

Neutral (Light):
  50:  #f8fafc
  100: #f1f5f9
  200: #e2e8f0
  ...
  900: #0f172a

Neutral (Dark):
  ë°˜ì „ëœ ìŠ¤ì¼€ì¼
```

### í°íŠ¸ ì‹œìŠ¤í…œ

```css
/* ìˆ«ì/ì½”ë“œ - ëª¨ë…¸ìŠ¤í˜ì´ìŠ¤ */
.font-mono {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
}

/* UI í…ìŠ¤íŠ¸ - ì‚°ì„¸ë¦¬í”„ */
.font-sans {
  font-family: 'Inter', 'Pretendard', sans-serif;
}

/* í—¤ë”© - ì„¸ë¯¸ë³¼ë“œ */
.font-display {
  font-family: 'Inter', sans-serif;
  font-weight: 600;
}
```

### ì• ë‹ˆë©”ì´ì…˜

```css
/* ì„œë¸Œí‹€í•œ íŠ¸ëœì§€ì…˜ */
.transition-default {
  transition: all 0.15s ease;
}

/* ë°ì´í„° ì—…ë°ì´íŠ¸ í”Œë˜ì‹œ */
@keyframes flash-update {
  0% { background: var(--accent-dim); }
  100% { background: transparent; }
}

/* ë¡œë”© ìŠ¤ì¼ˆë ˆí†¤ */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
```

### ë°˜ì‘í˜• ë””ìì¸

```
Desktop (â‰¥1280px): í’€ ë ˆì´ì•„ì›ƒ
Tablet (768-1279px): ì¶•ì†Œëœ ì‚¬ì´ë“œë°”
Mobile (â‰¤767px): í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°”
```

### í…Œë§ˆ í† ê¸€ ì»´í¬ë„ŒíŠ¸

```tsx
// ThemeToggle.tsx
export function ThemeToggle() {
  const [theme, setTheme] = useTheme();

  return (
    <button
      onClick={() => setTheme(theme === 'dark' ? 'light' : 'dark')}
      className="p-2 rounded-lg hover:bg-tertiary"
    >
      {theme === 'dark' ? <SunIcon /> : <MoonIcon />}
    </button>
  );
}
```

### ë””ìì¸ í† í° íŒŒì¼

```
apps/web/src/
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ tokens.css        # CSS ë³€ìˆ˜ ì •ì˜
â”‚   â”œâ”€â”€ theme.ts          # í…Œë§ˆ ì»¨í…ìŠ¤íŠ¸
â”‚   â””â”€â”€ components.css    # ê³µí†µ ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼
â”œâ”€â”€ components/
â”‚   â””â”€â”€ ui/
â”‚       â”œâ”€â”€ ThemeProvider.tsx
â”‚       â”œâ”€â”€ ThemeToggle.tsx
â”‚       â”œâ”€â”€ Card.tsx      # ë¦¬ë””ìì¸ëœ ì¹´ë“œ
â”‚       â”œâ”€â”€ Badge.tsx     # ìƒíƒœ ë±ƒì§€
â”‚       â”œâ”€â”€ Sparkline.tsx # ë¯¸ë‹ˆ ì°¨íŠ¸
â”‚       â””â”€â”€ ...
```

---

## 10. êµ¬í˜„ ìš°ì„ ìˆœìœ„

### Phase 1: UI/UX ì „ë©´ ë¦¬ë””ìì¸ (2-3ì¼)

- [ ] CSS ë³€ìˆ˜ ê¸°ë°˜ í…Œë§ˆ ì‹œìŠ¤í…œ êµ¬ì¶•
- [ ] ë‹¤í¬ëª¨ë“œ ì§€ì› (ThemeProvider, ThemeToggle)
- [ ] ì»´í¬ë„ŒíŠ¸ ë¦¬ë””ìì¸ (Card, Badge, Table, Navigation)
- [ ] í°íŠ¸ ì‹œìŠ¤í…œ ì ìš© (Inter, JetBrains Mono)
- [ ] ë ˆì´ì•„ì›ƒ ê°œì„  (ì •ë³´ ë°€ë„ í–¥ìƒ)
- [ ] ì• ë‹ˆë©”ì´ì…˜ ë° íŠ¸ëœì§€ì…˜
- [ ] ë°˜ì‘í˜• ë””ìì¸

### Phase 2: ì›¹ì†Œì¼“ ê¸°ë³¸ (1-2ì¼)

- [ ] ì›¹ì†Œì¼“ ì—°ê²° ê´€ë¦¬ (ì¬ì—°ê²° í¬í•¨)
- [ ] kline ìŠ¤íŠ¸ë¦¼ êµ¬ë… (1m, 15m, 1h)
- [ ] ë´‰ ì™„ì„± ì‹œ ì¶”ë¡  íŠ¸ë¦¬ê±° ë¡œì§
- [ ] ê¸°ì¡´ 5ì´ˆ í´ë§ ë°©ì‹ ì œê±°

### Phase 3: ê±°ë˜ ì œì–´ (1ì¼)

- [ ] ê±°ë˜ ì„¸ì…˜ ê´€ë¦¬ (ì‹œì‘/ì¤‘ì§€)
- [ ] `/api/trading/start`, `/api/trading/stop` API
- [ ] `/api/trading/status` API
- [ ] í”„ë¡ íŠ¸ì—”ë“œ ê±°ë˜ ì œì–´ UI (ìƒˆ ë””ìì¸ ì ìš©)

### Phase 4: Shadow ëª¨ë“œ (0.5ì¼)

- [ ] Shadow ì£¼ë¬¸ ì‹¤í–‰ ë¡œì§
- [ ] ê°€ìƒ SL/TP ì²´í¬
- [ ] Shadow ê±°ë˜ DB ì €ì¥

### Phase 5: ì¶”ê°€ ìŠ¤íŠ¸ë¦¼ (1ì¼)

- [ ] markPrice ìŠ¤íŠ¸ë¦¼ â†’ SL/TP ëª¨ë‹ˆí„°ë§
- [ ] bookTicker ìŠ¤íŠ¸ë¦¼ â†’ ìŠ¬ë¦¬í”¼ì§€ ê³„ì‚°
- [ ] í”¼ì²˜ ìºì‹œ ê´€ë¦¬

### Phase 6: REST í´ë§ ìµœì í™” (0.5ì¼)

- [ ] OI 1ë¶„ í´ë§ ì›Œì»¤
- [ ] L/S ë¹„ìœ¨ 5ë¶„ í´ë§ ì›Œì»¤
- [ ] í´ë§ ë°ì´í„° ìºì‹œ ì—°ë™

### Phase 7: Orders í˜ì´ì§€ (1ì¼)

- [ ] ëˆ„ì  í†µê³„ ì»´í¬ë„ŒíŠ¸ (TradingSummary)
- [ ] ê±°ë˜ ëª©ë¡ ì»´í¬ë„ŒíŠ¸ (TradeHistoryTable)
- [ ] `/api/trading/stats` API
- [ ] `/api/trading/trades` API

### Phase 8: ê±°ë˜ ì‹¤í–‰ ê°œì„  (1ì¼)

- [ ] userData ìŠ¤íŠ¸ë¦¼ â†’ ì£¼ë¬¸ ìƒíƒœ ì‹¤ì‹œê°„ ë™ê¸°í™”
- [ ] Live ëª¨ë“œ ì•ˆì „ì¥ì¹˜ ê°•í™”
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ ë° ì•Œë¦¼

---

## 11. ì„±ëŠ¥ ë¹„êµ

| í•­ëª© | í˜„ì¬ | ê°œì„  í›„ |
|------|------|--------|
| ì§€ì—° ì‹œê°„ | ìµœëŒ€ 5ì´ˆ (REST í´ë§) | < 100ms (ì›¹ì†Œì¼“) |
| ì¶”ë¡  íšŸìˆ˜/ë¶„ | 12íšŒ (ì¤‘ë³µ) | 1íšŒ (ì •í™•) |
| API í˜¸ì¶œ/ë¶„ | ~360íšŒ | ~36íšŒ (OI/LSë§Œ) |
| ë¦¬ì†ŒìŠ¤ ì‚¬ìš© | ë†’ìŒ | ë‚®ìŒ |
| ì •í™•ë„ | ë´‰ ê²½ê³„ ëª¨í˜¸ | ì •í™•í•œ íƒ€ì´ë° |
| ê±°ë˜ ì œì–´ | ìë™ ì‹œì‘ | **ìˆ˜ë™ ì‹œì‘/ì¤‘ì§€** |
| UI/UX | ì´ŒìŠ¤ëŸ¬ìš´ ë””ìì¸, ë¼ì´íŠ¸ ëª¨ë“œë§Œ | **ëª¨ë˜ ë””ìì¸ + ë‹¤í¬ëª¨ë“œ** |
| í…Œë§ˆ | í•˜ë“œì½”ë”© ìƒ‰ìƒ | CSS ë³€ìˆ˜ ê¸°ë°˜ í…Œë§ˆ ì‹œìŠ¤í…œ |
| ì •ë³´ ë°€ë„ | ë‚®ìŒ | ë†’ìŒ (ìŠ¤íŒŒí¬ë¼ì¸, ë±ƒì§€ ë“±) |

---

## 12. ì£¼ì˜ì‚¬í•­

### ì›¹ì†Œì¼“ ì—°ê²° ê´€ë¦¬

```python
# ì¬ì—°ê²° ë¡œì§ í•„ìˆ˜
async def connect_with_retry(url: str, max_retries: int = 10):
    retries = 0
    while retries < max_retries:
        try:
            async with websockets.connect(url) as ws:
                retries = 0  # ì—°ê²° ì„±ê³µ ì‹œ ë¦¬ì…‹
                await handle_messages(ws)
        except Exception as e:
            retries += 1
            wait_time = min(2 ** retries, 60)  # ì§€ìˆ˜ ë°±ì˜¤í”„
            logger.error(f"Connection failed: {e}, retry in {wait_time}s")
            await asyncio.sleep(wait_time)
```

### Rate Limit

- ì›¹ì†Œì¼“: ì—°ê²°ë‹¹ ìŠ¤íŠ¸ë¦¼ 200ê°œ ì œí•œ
- REST API: ë¶„ë‹¹ 1200 ìš”ì²­ ì œí•œ
- 30ì¢…ëª© Ã— 5ìŠ¤íŠ¸ë¦¼ = 150ê°œ â†’ 1ì—°ê²°ë¡œ ì¶©ë¶„

### ì‹œê°„ ë™ê¸°í™”

```python
# ì„œë²„ ì‹œê°„ê³¼ ë¡œì»¬ ì‹œê°„ ì°¨ì´ ë³´ì •
server_time = await get_binance_server_time()
time_offset = server_time - local_time
```

### ê±°ë˜ ì•ˆì „ì¥ì¹˜

```python
# Live ëª¨ë“œ ì‹œì‘ ì „ í™•ì¸
def validate_live_start():
    checks = [
        check_api_key_valid(),
        check_sufficient_balance(),
        check_model_loaded(),
        check_websocket_connected(),
    ]
    if not all(checks):
        raise TradingStartError("Safety checks failed")
```

---

*ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2026-02-03*
